angular.module("testecvc",["ngAnimate","ngResource","ngMaterial","carrosServices"]).filter("startFrom",function(){return function(a,o){return o=+o,a.slice(o)}}).filter("rangePagination",function(){return function(a,o){o=parseInt(o);for(var e=1;e<=o;e++)a.push(e);return a}});var numberToMoney=function(a){return(a=a.toFixed(2).split("."))[0]=a[0].split(/(?=(?:...)*$)/).join("."),a.join(",")},removeAcento=function(a){return a=(a=(a=(a=(a=(a=(a=a.toLowerCase()).replace(new RegExp("[ÁÀÂÃ]","gi"),"a")).replace(new RegExp("[ÉÈÊ]","gi"),"e")).replace(new RegExp("[ÍÌÎ]","gi"),"i")).replace(new RegExp("[ÓÒÔÕ]","gi"),"o")).replace(new RegExp("[ÚÙÛ]","gi"),"u")).replace(new RegExp("[Ç]","gi"),"c")};angular.module("testecvc").controller("CarrosController",["$scope","$anchorScroll","orderByFilter","carrosResource","estadosResource",function(a,o,e,r,t){for(a.feedbackAtualizacaoLista=!1,a.atualizarLista=function(){a.feedbackAtualizacaoLista=!0,setTimeout(function(){a.feedbackAtualizacaoLista=!1,a.$apply()},500)},a.carros=[],a.estados=[],a.filtro="",a.mensagem="",a.ordem_param="none",a.moeda="real",a.diasLocacao=1,a.devolverOutroLocal=!1,a.opcoesHorarios=[],i=0;i<24;i++){let o=i<10?"0"+i:i;a.opcoesHorarios.push(o+":00"),a.opcoesHorarios.push(o+":30")}a.horarioRetirada="08:00",a.horarioDevolucao="13:00";var n=new Date;a.dataRetirada=n,a.minDataRetirada=n,a.maxDataRetirada=moment(n,"DD/MM/YYYY").add(3,"months").toDate(),a.calcularLimitesDataDevolucao=function(){var o=a.dataRetirada;a.minDataDevolucao=moment(o,"DD/MM/YYYY").add(1,"days").toDate(),a.dataDevolucao=moment(o,"DD/MM/YYYY").add(2,"days").toDate(),a.maxDataDevolucao=moment(o,"DD/MM/YYYY").add(30,"days").toDate(),a.atualizarLista()},a.calcularDiasLocacao=function(){a.diasLocacao=moment(a.dataDevolucao).diff(a.dataLocacao,"days"),a.atualizarLista()},a.calcularLimitesDataDevolucao(),a.calcularDiasLocacao(),a.moedas={real:{nome:"Real",simbolo:"R$",cotacao:1},dolar:{nome:"Dolar",simbolo:"U$",cotacao:.7},euro:{nome:"Euro",simbolo:"€",cotacao:.4}},a.pagination={itemsPerPage:"10",page:1,totalItems:0,totalPages:1},a.alterarPagina=function(e){e<1&&(e=1),e>a.pagination.totalPages&&(e=a.pagination.totalPages),a.pagination.page=e,o("resultados-busca")},a.atualizarPagination=function(){a.atualizarLista(),a.pagination.totalItems=a.carros.length,a.pagination.totalPages=Math.ceil(a.carros.length/a.pagination.itemsPerPage)},r.query(function(o){a.carros=o,a.atualizarPagination()},function(a){console.log(a)}),t.query(function(o){a.estados=o},function(a){console.log(a)}),a.queryEstado=function(o){return a.estados.filter(function(a){return removeAcento(a.capital).indexOf(removeAcento(o))>=0})},a.toggleDetalhe=function(a){a.showDetalhe=!a.showDetalhe},a.reordenar=function(){switch(a.atualizarLista(),a.ordem_param){case"low_price":a.carros=e(a.carros,"valor",!0);break;case"high_price":a.carros=e(a.carros,"valor",!1);break;case"high_locate":a.carros=e(a.carros,"locacoes",!0);break;default:a.carros=e(a.carros,"id",!1)}},a.formatarValor=function(o){return numberToMoney(o*a.moedas[a.moeda].cotacao)},a.favoritarCarro=function(a){a.favorito=!a.favorito},a.alugarCarro=function(a){a.alugado=!0}}]).config(["$mdDateLocaleProvider",function(a){a.formatDate=function(a){return moment(a).format("DD/MM/YYYY")}}]),angular.module("carrosServices",["ngResource"]).factory("carrosResource",["$resource",function(a){return a("https://5a550e3ba3ba810012c00956.mockapi.io/api/v1/carros",null,{query:{method:"GET",isArray:!0}})}]).factory("estadosResource",["$resource",function(a){return a("https://5a550e3ba3ba810012c00956.mockapi.io/api/v1/estados",null,{query:{method:"GET",isArray:!0}})}]);